# .cargo/config.toml (Исправленная версия)

[build]
# Наша целевая архитектура
# target = "i686-unknown-none"

# --- Единая секция для настройки 32-битного X86 ---
[target.'cfg(target_arch = "x86")']
# Указываем, что нужно использовать внешний кросс-линкер
#linker = "i686-elf-ld"

# Флаги для линковщика (передаются компилятором Rust)
rustflags = [
    # Отключаем стандартную библиотеку (аналог -nostdlib)
    "-C", "link-arg=-nostdlib",
    # Включаем библиотеку поддержки компилятора (аналог -lgcc)
    "-C", "link-arg=-lgcc",
]

[unstable]
# Включаем экспериментальные функции, чтобы разрешить сборку базовых библиотек
build-std = ["core", "compiler_builtins"]
